{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <div>
        <h1 class="mb-1">Pickup History</h1>
        <p class="text-muted mb-0">A record of every distribution made for your household.</p>
    </div>
    <a class="btn btn-outline-secondary" href="{{ url_for('client.client_dashboard') }}">Back to Dashboard</a>
</div>

{% if history and history|length > 0 %}
  <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead>
            <tr>
                <th>Date</th>
                <th>Volunteer</th>
                <th>Weight (kg)</th>
                <th>Items</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            {% for row in history %}
            <tr>
                <td>
                    {% if row.distribution_date %}
                        {{ row.distribution_date.strftime("%b %d, %Y") }}
                    {% else %}
                        {{ row.created_at.strftime("%b %d, %Y") if row.created_at else 'â€”' }}
                    {% endif %}
                </td>
                <td>{{ row.volunteer_name or 'N/A' }}</td>
                <td>{{ row.weight_kg }}</td>
                <td>{{ row.items_description or '-' }}</td>
                <td>{{ row.notes or '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
      </table>
  </div>
{% else %}
  <div class="alert alert-info">No distributions recorded yet.</div>
{% endif %}
{% endblock %}
